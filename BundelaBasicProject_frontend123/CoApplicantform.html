<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Co-Applicant Form</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            max-width: 100vw;
            overflow-x: hidden;
        }
        .navbar {
            background-color: white;
        }
        .navbar-brand img {
            max-height: 70px;
        }
        .navbar-nav .nav-link {
            color: #000000;
        }
        </style>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    </head>
    
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <a class="navbar-brand" href="#">
            <img src="logoo.png" alt="Logo">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="./index.html">Home</a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container">

        
        <h2 class="mb-4 mt-4"><b>Co-Applicant Details</b></h2>
        <form id="coapplicantrform">
            <div class="row">
                <!-- Personal Information -->
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="Name"> Full Name:</label>
                        <input type="text" class="form-control" id="namec" name="Name" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="FatherName">Father/Spouse Name:</label>
                        <input type="text" class="form-control" id="fatherc" name="FatherName" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="Mother">Mother's Name:</label>
                        <input type="text" class="form-control" name="mother" id="motherc" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="Mobile">Mobile Number:</label>
                        <input type="text" class="form-control" id="mobilec"  name="Mobile" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="DateOfBirth">Date of Birth:</label>
                        <input type="date" class="form-control" id="dobc" name="DateOfBirth" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="Age">Age:</label>
                        <input type="Age" class="form-control" id="agec" name="Age" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="Gender">Gender:</label>
                        <select id="genderc" class="form-control" name="Gender" id="genderc" required>
                            <option value="Select">Select</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Others</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="MaritalStatus"  required>Marital Status:</label>
                        <select id="maritalstatusc" class="form-control" id="maritalstatusc" name="MaritalStatus" required>
                            <option value="Select">Select</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                </div>
            </div>
            <!-- Permanent Address Section -->
            <h3>Permanent Address</h3>
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="Addresstype" >Address Type:</label>
                        <select id="addresstypec" class="form-control" name="Addresstype" id="addressTypec" required>
                            <option value="Select">Select</option>
                            <option value="Business">Business</option>
                            <option value="Residence">Residence</option>
                            <option value="Owned">Owned</option>
                            <option value="Rented">Rented</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="form-group">
                        <label for="permanentAddress" >Address:</label>
                        <input type="text" class="form-control" id="permanentaddressc" name="permanentAddress" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="CurrentAddress_locality"  >Locality:</label>
                        <input type="text" class="form-control" id="localityc" name="CurrentAddress_locality" required>
                    </div>
                </div>
                
               
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="CurrentAddress_Landmark" >Landmark:</label>
                        <input type="text" class="form-control"  id="landmarkc" name="CurrentAddress_Landmark" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="CurrentAddress_City" >City:</label>
                        <input type="text" class="form-control" id="cityc" name="CurrentAddress_City" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="CurrentAddress_District">District:</label>
                        <input type="text" class="form-control" id="districtc" name="CurrentAddress_District" required>
                    </div>
                </div>
                
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="PermanentAddress_DistanceInKm">Distance in Km:</label>
                        <input type="text" class="form-control" id="distanceinkmc" name="PermanentAddress_DistanceInKm" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="PermanentAddress_StateName">
                    
                        <div class="form-group">
                            <label for="PermanentAddress_StateName" >State:</label>
                            <select  id="statenamec" class="form-control" name="PermanentAddress_StateName" required>
                                <option value="Select">Select</option>
                                <option value="Andhra Pradesh">Andhra Pradesh</option>
                                <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                                <option value="Assam">Assam</option>
                                <option value="Bihar">Bihar</option>
                                <option value="Chhattisgarh">Chhattisgarh</option>
                                <option value="Goa">Goa</option>
                                <option value="Gujarat">Gujarat</option>
                                <option value="Haryana">Haryana</option>
                                <option value="Himachal Pradesh">Himachal Pradesh</option>
                                <option value="Jharkhand">Jharkhand</option>
                                <option value="Karnataka">Karnataka</option>
                                <option value="Kerala">Kerala</option>
                                <option value="Madhya Pradesh">Madhya Pradesh</option>
                                <option value="Maharashtra">Maharashtra</option>
                                <option value="Manipur">Manipur</option>
                                <option value="Meghalaya">Meghalaya</option>
                                <option value="Mizoram">Mizoram</option>
                                <option value="Nagaland">Nagaland</option>
                                <option value="Odisha">Odisha</option>
                                <option value="Punjab">Punjab</option>
                                <option value="Rajasthan">Rajasthan</option>
                                <option value="Sikkim">Sikkim</option>
                                <option value="Tamil Nadu">Tamil Nadu</option>
                                <option value="Telangana">Telangana</option>
                                <option value="Tripura">Tripura</option>
                                <option value="Uttar Pradesh">Uttar Pradesh</option>
                                <option value="Uttarakhand">Uttarakhand</option>
                                <option value="West Bengal">West Bengal</option>
                            </select>
                        </div>
                       
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="PinCode " >Pin Code:</label>
                        <input type="text" class="form-control" id="pincodec" name="PinCodec" required>
                    </div>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-12 offset-sm-5">
                    <button type="submit" class="btn btn-primary"><b>Submit</b></button>
                </div>
            </div>
    
        </form>
        <form>
            <h3>Upload Documents</h3>
            <h5 style="color: red; text-align: center;">Note: Please upload an image file. Accepted formats: JPEG, PNG, GIF, BMP,jpg etc.</h5>
            <div class="row">     
    <div class="col-md-4">
        <div class="form-group">
            <label for="pancard">Pancard:</label>
            <div class="input-group">
                <input type="file" class="form-control-file" id="pan1" accept=".jpg, .pdf" required>
                <div class="input-group-append">
                    <button class="btn btn-primary mt-2" type="button" onclick="uploadPan()">Upload</button>
                </div>
            </div>
    </div>
     </div>

<div class="col-md-4">
    <div class="form-group">
        <label for="coApplicantPhoto">Passport Photo:</label>
        <div class="input-group">
            <input type="file" class="form-control-file" id="photo1" accept=".jpg, .pdf" required>
            <div class="input-group-append">
                <button class="btn btn-primary mt-2" type="button" onclick="uploadPhoto()">Upload</button>
            </div>
        </div>
    </div>
</div>
<div class="col-md-4">
<div class="form-group">
    <label for="Signature">Signature:</label>
    <div class="form-group">
        <input type="file" class="form-control-file" id="signature1" accept=".jpg, .pdf" required>
        <div class="input-group-append">
            <button class="btn btn-primary mt-2" type="button" onclick="uploadsignature()">Upload</button>
            </div>
    </div>
</div>
</div>
</div>
<div class="row">

    <h5 style="color: red; text-align: center;">Please upload any one of the following documents: Aadhar Card, Voted Id, or Driver's License.</h5>
    <div class="col-md-4">
        <div class="form-group">
            <label for="Photo">Aadhar card(front and back):</label>
            <div class="form-group">
                <input type="file" class="form-control-file" id="aadhar1" accept=".jpg, .pdf" required>
                <div class="input-group-append">
                    <button class="btn btn-primary mt-2" type="button" onclick="uploadadhar()">Upload</button>
                    </div>
            </div>
    </div>
    </div>
    <div class="col-md-4">
    <div class="form-group">
        <label for="VoterID">Voter ID:</label>
        <div class="form-group">
            <input type="file" class="form-control-file" id="voter1" accept=".jpg, .pdf" required>
            <div class="input-group-append">
                <button class="btn btn-primary mt-2" type="button" onclick="uploadvoter()">Upload</button>
                </div>
        </div>
</div>
    </div>
  <div class="col-md-4">
<div class="form-group">
    <label for="drivinglicense">Driving License:</label>
    <div class="form-group">
        <input type="file" class="form-control-file" id="drivinglicense1" accept=".jpg, .pdf" required>
        <div class="input-group-append">
            <button class="btn btn-primary mt-2" type="button" onclick="uploaddriving()" >Upload</button>
            </div>
    </div>
</div>
   </div>
</div>

        </form>

        <div class="row">
            <div class="col   d-flex mt-3 mb-2 justify-content-center align-items-center ">
                <button class="btn btn-primary mt-2" type="button" onclick="handleNext()">Next Page </button>
            </div>
        </div>
    </div>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        <script>
        
            async function handlesaveinfoc(event) {
                event.preventDefault();
                console.log("function has called");
             console.log("function has called");
                
             const formDatac = {
     name: document.getElementById('namec').value,
     father: document.getElementById('fatherc').value,
     mother: document.getElementById('motherc').value,
     dob: document.getElementById('dobc').value,
     mob: document.getElementById('mobilec').value,
     age: document.getElementById('agec').value,
     gender: document.getElementById('genderc').value,
     maritalstatus: document.getElementById('maritalstatusc').value,
     permanentAddress: document.getElementById('permanentaddressc').value,
     locality: document.getElementById('localityc').value,
     district: document.getElementById('districtc').value,
     city: document.getElementById('cityc').value,
     stateName: document.getElementById('statenamec').value,
     pinCode: document.getElementById('pincodec').value,
     landmark: document.getElementById('landmarkc').value,
     distanceinkm: document.getElementById('distanceinkmc').value,
     addresstype: document.getElementById('addresstypec').value,
     applicantDetails1: {} // Initialize as an empty object
 };
 
 try {
     const latestResponse = await fetch('http://localhost:8080/api/latest');
     if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
     }
 
     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;
 
     // Update applicantDetails1 with the fetched id_applicant
     formDatac.applicantDetails1 = { id_applicant };
 
     const response = await fetch('http://localhost:8080/api/coapplicantdetails', {
         method: 'POST',
         headers: {
             'Content-Type': 'application/json'
         },
         body: JSON.stringify(formDatac)
     });
 
     if (response.ok) {
         alert('Data saved successfully');
     } else {
         alert('Failed to save data: ' + response.statusText);
     }
 } catch (error) {
     alert('An error occurred: ' + error.message);
 }
 
            }
     
            async function uploadPhoto() {
                const photoInput = document.getElementById('photo1');
                const file = photoInput.files[0];
     
                if (!file) {
                    alert('Please select a file to upload.');
                    return;
                }
     
                try {
 
                 const latestResponse = await fetch('http://localhost:8080/api/latest1');
            if (!latestResponse.ok) {
             throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
            }
 
         const latestData = await latestResponse.json();
         const id_coApp = latestData.id_coApp;
 
         // Create form data and append file and id_applicant
         const formData = new FormData();
         formData.append('file', file);
         formData.append('coapplicantdetails', id_coApp);
                    const response = await fetch('http://localhost:8080/api/coapplicantphoto', {
                        method: 'POST',
                        body: formData
                    });
     
                    if (response.ok) {
                        alert('File uploaded successfully');
                        console.log("File uploaded successfully");
                    } else {
                        alert('Failed to upload file: ' + response.statusText);
                        console.log("Failed to upload file");
                    }
                } catch (error) {
                    alert('An error occurred: ' + error.message);
                }
            }
     
            async function uploadPan() {
                const photoInput = document.getElementById('pan1');
                const file = photoInput.files[0];
     
                if (!file) {
                    alert('Please select a file to upload.');
                    return;
                }
     
                try {
 
                 const latestResponse = await fetch('http://localhost:8080/api/latest1');
            if (!latestResponse.ok) {
             throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
            }
 
         const latestData = await latestResponse.json();
         const id_coApp = latestData.id_coApp;
 
         // Create form data and append file and id_applicant
         const formData = new FormData();
         formData.append('file', file);
         formData.append('coapplicantdetails', id_coApp);
                    const response = await fetch('http://localhost:8080/api/coapplicantpancard', {
                        method: 'POST',
                        body: formData
                    });
     
                    if (response.ok) {
                        alert('File uploaded successfully');
                        console.log("File uploaded successfully");
                    } else {
                        alert('Failed to upload file: ' + response.statusText);
                        console.log("Failed to upload file");
                    }
                } catch (error) {
                    alert('An error occurred: ' + error.message);
                }
            }
     
     
            async function uploadvoter() {
                const photoInput = document.getElementById('voter1');
                const file = photoInput.files[0];
     
                if (!file) {
                    alert('Please select a file to upload.');
                    return;
                }
     
     
                try {
 
 
                 const latestResponse = await fetch('http://localhost:8080/api/latest1');
            if (!latestResponse.ok) {
             throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
            }
 
         const latestData = await latestResponse.json();
         const id_coApp = latestData.id_coApp;
 
         // Create form data and append file and id_applicant
         const formData = new FormData();
         formData.append('file', file);
         formData.append('coapplicantdetails', id_coApp);
                    const response = await fetch('http://localhost:8080/api/coapplicantvoterid', {
                        method: 'POST',
                        body: formData
                    });
     
                    if (response.ok) {
                        alert('File uploaded successfully');
                        console.log("File uploaded successfully");
                    } else {
                        alert('Failed to upload file: ' + response.statusText);
                        console.log("Failed to upload file");
                    }
                } catch (error) {
                    alert('An error occurred: ' + error.message);
                }
            }
     
     
            async function uploadadhar() {
                const photoInput = document.getElementById('aadhar1');
                const file = photoInput.files[0];
     
                if (!file) {
                    alert('Please select a file to upload.');
                    return;
                }
     
                try {
 
                 const latestResponse = await fetch('http://localhost:8080/api/latest1');
            if (!latestResponse.ok) {
             throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
            }
 
         const latestData = await latestResponse.json();
         const id_coApp = latestData.id_coApp;
 
         // Create form data and append file and id_applicant
         const formData = new FormData();
         formData.append('file', file);
         formData.append('coapplicantdetails', id_coApp);
                    const response = await fetch('http://localhost:8080/api/coapplicant/adharcard', {
                        method: 'POST',
                        body: formData
                    });
     
                    if (response.ok) {
                        alert('File uploaded successfully');
                        console.log("File uploaded successfully");
                    } else {
                        alert('Failed to upload file: ' + response.statusText);
                        console.log("Failed to upload file");
                    }
                } catch (error) {
                    alert('An error occurred: ' + error.message);
                }
            }
     
     
     
     
     
            async function uploaddriving() {
                const photoInput = document.getElementById('drivinglicense1');
                const file = photoInput.files[0];
     
                if (!file) {
                    alert('Please select a file to upload.');
                    return;
                }
     
                try {
 
                 const latestResponse = await fetch('http://localhost:8080/api/latest1');
            if (!latestResponse.ok) {
             throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
            }
 
         const latestData = await latestResponse.json();
         const id_coApp = latestData.id_coApp;
 
         // Create form data and append file and id_applicant
         const formData = new FormData();
         formData.append('file', file);
         formData.append('coapplicantdetails', id_coApp);
                    const response = await fetch('http://localhost:8080/api/coapplicantDl', {
                        method: 'POST',
                        body: formData
                    });
     
                    if (response.ok) {
                        alert('File uploaded successfully');
                        console.log("File uploaded successfully");
                    } else {
                        alert('Failed to upload file: ' + response.statusText);
                        console.log("Failed to upload file");
                    }
                } catch (error) {
                    alert('An error occurred: ' + error.message);
                }
            }
     
     
     
     
     
            async function uploadsignature() {
                const photoInput = document.getElementById('signature1');
                const file = photoInput.files[0];
     
                if (!file) {
                    alert('Please select a file to upload.');
                    return;
                }
     
                try {
 
                 const latestResponse = await fetch('http://localhost:8080/api/latest1');
            if (!latestResponse.ok) {
             throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
            }
 
         const latestData = await latestResponse.json();
         const id_coApp = latestData.id_coApp;
 
         // Create form data and append file and id_applicant
         const formData = new FormData();
         formData.append('file', file);
         formData.append('coapplicantdetails', id_coApp);
                    const response = await fetch('http://localhost:8080/api/coapplicantSign', {
                        method: 'POST',
                        body: formData
                    });
     
                    if (response.ok) {
                        alert('File uploaded successfully');
                        console.log("File uploaded successfully");
                    } else {
                        alert('Failed to upload file: ' + response.statusText);
                        console.log("Failed to upload file");
                    }
                } catch (error) {
                    alert('An error occurred: ' + error.message);
                }
            }
 
            const booleanValueg = "false"; // Corrected variable name for clarity
     
     function handleNext() {
     // Specify the URL of the next page
     const nextPageUrl = "./gurantordetails.html"; // Replace with the actual URL of the next page
     
     // Check the condition and navigate or show alert
     // if (booleanValue === "true") {
     //     window.location.href = nextPageUrl;
     // } else {
     //     alert('Please check and fill all of the above documents and entities.');
     // }
     window.location.href = nextPageUrl;
     } 

     document.getElementById('coapplicantrform').addEventListener('submit', handlesaveinfoc);
     </script>
   
</body>
</html>