<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Information Form</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            max-width: 100vw;
            overflow-x: hidden;
        }
        .navbar {
            background-color: white;
        }
        .navbar-brand img {
            max-height: 70px;
        }
        .navbar-nav .nav-link {
            color: #000000;
        }
        </style>
    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    </head>
    
<body>

    <nav class="navbar navbar-expand-lg navbar-light bg-white">
        <a class="navbar-brand" href="#">
            <img src="logoo.png" alt="Logo">
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item ">
                    <a class="nav-link" href="./index.html">Home</a>
                </li>
            </ul>
        </div>
    </nav>

    <div class="container ">
            
        

        <h2 class="mb-4 mt-4">Applicant Information</h2>
        <form id="applicantform" >
            <!-- Personal Information -->
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="name">Full Name:</label>
                        <input type="text" class="form-control" id="name" name="name" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="fatherName">Father's Name:</label>
                        <input type="text" class="form-control" id="fname" name="FatherName" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="mother">Mother's Name:</label>
                        <input type="text" class="form-control" id="mother" name="Mother" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="dateofbirth">Date of Birth:</label>
                        <input type="date" class="form-control" id="dob" name="DateOfBirth" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="mobile">Mobile Number:</label>
                        <input type="text" class="form-control" id="mobile" name="Mobile" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="age">Age:</label>
                        <input type="text" class="form-control" id="age" name="age" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="gender">Gender:</label>
                        <select id="gen" type="text" class="form-control" name="gen" required>
                            <option type="text" value="Select">Select</option>
                            <option type="text" value="Male">Male</option>
                            <option type="text" value="Female">Female</option>
                            <option type="text" value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="maritalstatus">Marital Status:</label>
                        <select id="maritals" class="form-control" type="text" name="MaritalStatus" required>
                            <option value="Select">Select</option>
                            <option value="Single">Single</option>
                            <option value="Married">Married</option>
                            <option value="Divorced">Divorced</option>
                            <option value="Widowed">Widowed</option>
                        </select>
                    </div>
                </div>
                </div>
               
        
                

            <!-- Current Address Section -->
            <h3>Current Address</h3>
            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="currentaddress">Address:</label>
                        <input type="text" class="form-control" id="caddress" name="CurrentAddress" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="locality">Locality:</label>
                        <input type="text" class="form-control" id="locality" name="Locality" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="pincode">Pin Code:</label>
                        <input type="text" class="form-control" id="pinc" name="PinCode" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="landmark">Landmark:</label>
                        <input type="text" class="form-control" id="landmark" name="landmark" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="city">City:</label>
                        <input type="text" class="form-control" id="city" name="city" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="district">District:</label>
                        <input type="text" class="form-control" id="district" name="district" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="distanceinkm">Distance in Km:</label>
                        <input type="text" class="form-control" id="dinkm" name="DistanceInKm" required>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="statename">State:</label>
                        <select id="statename" class="form-control" name="StateName" required>
                            <option value="Select">Select</option>
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chhattisgarh">Chhattisgarh</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Permanent Address Section -->
            <h3>Permanent Address</h3>
            <div class="row">
                <div class="col-md-3">
                    <div class="form-group">
                        <label for="AddressType">Address Type:</label>
                        <select id="atype" class="form-control" type="text"  name="AddressType" required>
                            <option value="Select">Select</option>
                            <option value="Business">Business</option>
                            <option value="Residence">Residence</option>
                            <option value="Owned">Owned</option>
                            <option value="Rented">Rented</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-9">
                    <div class="form-group">
                        <label for="permanentaddress">Address:</label>
                        <input type="text" class="form-control" id="paddress" name="PermanentAddress" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="permanentlocality">Locality1
							:</label>
                        <input type="text" class="form-control" id="plocality" name="Locality" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="permanentcity">City:</label>
                        <input type="text" class="form-control" id="pcity" name="City1" required>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="form-group">
                        <label for="permanentdistrict">District:</label>
                        <input type="text" class="form-control" id="pdistrict" name="District1" required>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="permanentstatename">State:</label>
                        <select id="psname" class="form-control" name="StateName1" required>
                            <option value="Select">Select</option>
                            <option value="Andhra Pradesh">Andhra Pradesh</option>
                            <option value="Arunachal Pradesh">Arunachal Pradesh</option>
                            <option value="Assam">Assam</option>
                            <option value="Bihar">Bihar</option>
                            <option value="Chhattisgarh">Chhattisgarh</option>
                            <option value="Goa">Goa</option>
                            <option value="Gujarat">Gujarat</option>
                            <option value="Haryana">Haryana</option>
                            <option value="Himachal Pradesh">Himachal Pradesh</option>
                            <option value="Jharkhand">Jharkhand</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Kerala">Kerala</option>
                            <option value="Madhya Pradesh">Madhya Pradesh</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Manipur">Manipur</option>
                            <option value="Meghalaya">Meghalaya</option>
                            <option value="Mizoram">Mizoram</option>
                            <option value="Nagaland">Nagaland</option>
                            <option value="Odisha">Odisha</option>
                            <option value="Punjab">Punjab</option>
                            <option value="Rajasthan">Rajasthan</option>
                            <option value="Sikkim">Sikkim</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Telangana">Telangana</option>
                            <option value="Tripura">Tripura</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="Uttarakhand">Uttarakhand</option>
                            <option value="West Bengal">West Bengal</option>
                        </select>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="permanentpincode">Pin Code:</label>
                        <input type="text" class="form-control" id="ppcode" name="PinCode1" required>
                    </div>
                </div>
            </div>
      

            <!-- Form Submission -->
            <div class="form-group row">
                <div class="col-sm-12 offset-sm-5">
                    <button type="submit" class="btn btn-primary"><b>Submit</b></button>
                </div>
            </div>
        </form>


        <form>
            <h3>Upload Documents</h3>
            <h5 style="color: red; text-align: center;">Note: Please upload an image file. Accepted formats: JPEG, PNG, GIF, BMP,jpg etc.</h5>
            

        <div class="row">
            <div class="col-md-4">
                <div class="form-group">
                    <label for="coApplicantPhoto">Passport Photo:</label>
                    <div class="input-group">
                        <input type="file" class="form-control-file" id="photo1" accept="image/*" required>
                        <div class="input-group-append">
                            <button class="btn btn-primary mt-2" type="button" onclick="uploadPhoto()">Upload</button>
                        </div>
                    </div>
                </div>
                </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="pancard">Pancard:</label>
                    <div class="input-group">
                        <input type="file" class="form-control-file" id="pan1" accept="image/*" required>
                        <div class="input-group-append">
                            <button class="btn btn-primary mt-2" type="button" onclick="uploadPan()">Upload</button>
                        </div>
                    </div>
            </div>
        </div>
        
        <div class="col-md-3">
        <div class="form-group">
            <label for="Signature">Signature:</label>
            <div class="form-group">
                <input type="file" class="form-control-file" id="signature1" accept="image/*" required>
                <div class="input-group-append">
                    <button class="btn btn-primary mt-2" type="button" onclick="uploadsignature()">Upload</button>
                    </div>
            </div>
        </div>
        </div>
        </div>

        <div class="row"> 

            <h5 style="color: red; text-align: center;">Please upload any one of the following documents: Aadhar Card, Voted Id, or Driver's License.</h5>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="drivinglicense">Driving License:</label>
                    <div class="form-group">
                        <input type="file" class="form-control-file" id="drivinglicense1" accept="image/*" required>
                        <div class="input-group-append">
                            <button class="btn btn-primary mt-2" type="button" onclick="uploaddriving()" >Upload</button>
                            </div>
                    </div>
            </div>
            </div>  
            
        <div class="col-md-4">
            <div class="form-group">
                <label for="Photo">Aadhar card(front and back):</label>
                <div class="form-group">
                    <input type="file" class="form-control-file" id="aadhar1" accept="image/*" required>
                    <div class="input-group-append">
                        <button class="btn btn-primary mt-2" type="button" onclick="uploadadhar()">Upload</button>
                        </div>
                </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="form-group">
            <label for="VoterID">Voter ID:</label>
            <div class="form-group">
                <input type="file" class="form-control-file" id="voter1" accept="image/*" required>
                <div class="input-group-append">
                    <button class="btn btn-primary mt-2" type="button" onclick="uploadvoter()">Upload</button>
                    </div>
            </div>
    </div>
</div>
    </div>

        <div class="row">
            <div class="col   d-flex mt-3 mb-2 justify-content-center align-items-center ">
                <button class="btn btn-primary mt-2" type="button" onclick="handleNext()">Next Page</button>
            </div>
        </div>
        </form>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        document.getElementById('applicantform').addEventListener('submit', handlesaveinfo);
        async function handlesaveinfo(event) {
            event.preventDefault();
            console.log("function has called");
            const formData = {
                name: document.getElementById('name').value,
                fathername: document.getElementById('fname').value,
                mother: document.getElementById('mother').value,
                dob: document.getElementById('dob').value,
                mobile: document.getElementById('mobile').value,
                age: document.getElementById('age').value,
                gender: document.getElementById('gen').value,
                maritalstatus: document.getElementById('maritals').value,
                currentaddress: document.getElementById('caddress').value,
                locality: document.getElementById('locality').value,
                pincode: document.getElementById('pinc').value,
                landmark: document.getElementById('landmark').value,
                city: document.getElementById('city').value,
                district: document.getElementById('district').value,
                distanceinkm: document.getElementById('dinkm').value,
                statename: document.getElementById('statename').value,
                addresstype: document.getElementById('atype').value,
                permanentaddress: document.getElementById('paddress').value,
                permanentlocality: document.getElementById('plocality').value,
                permanentcity: document.getElementById('pcity').value,
                permanentdistrict: document.getElementById('pdistrict').value,
                permanentstatename: document.getElementById('psname').value,
                permanentpincode: document.getElementById('ppcode').value
            };

            try {
                const response = await fetch('http://localhost:8080/api/applicantdetails', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
                if (response.ok) {
                    
                alert('Data saved successfully');
                
                } else {
                    alert('Failed to save data: ' + response.statusText);
                }
            } catch (error) {
                alert('An error occurred: ' + error.message);
            }
        }

        async function uploadPhoto() {
      const photoInput = document.getElementById('photo1');
     const file = photoInput.files[0];

 if (!file) {
     alert('Please select a file to upload.');
     return;
 }

 try {
     // Fetch the latest applicant data
     const latestResponse = await fetch('http://localhost:8080/api/latest');
     if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
     }

     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;

     // Create form data and append file and id_applicant
     const formData = new FormData();
     formData.append('file', file);
     formData.append('applicantDetails1', id_applicant);

     // Upload the photo with the appended id_applicant
     const uploadResponse = await fetch('http://localhost:8080/api/applicantphoto', {
         method: 'POST',
         body: formData
     });

     if (uploadResponse.ok) {
         alert('File uploaded successfully');
         console.log("File uploaded successfully");
     } else {
         alert('Failed to upload file: ' + uploadResponse.statusText);
         console.log("Failed to upload file");
     }
 } catch (error) {
     alert('An error occurred: ' + error.message);
 }
}


        async function uploadPan() {
            const photoInput = document.getElementById('pan1');
            const file = photoInput.files[0];

            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

            try {

             const latestResponse = await fetch('http://localhost:8080/api/latest');
        if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
        }

     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;

     // Create form data and append file and id_applicant
     const formData = new FormData();
     formData.append('file', file);
     formData.append('applicantDetails1', id_applicant);

                const response = await fetch('http://localhost:8080/api/applicantpancard', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('File uploaded successfully');
                    console.log("File uploaded successfully");
                } else {
                    alert('Failed to upload file: ' + response.statusText);
                    console.log("Failed to upload file");
                }
            } catch (error) {
                alert('An error occurred: ' + error.message);
            }
        }


        async function uploadvoter() {
            const photoInput = document.getElementById('voter1');
            const file = photoInput.files[0];

            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

           

            try {

             const latestResponse = await fetch('http://localhost:8080/api/latest');
        if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
        }

     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;

     // Create form data and append file and id_applicant
     const formData = new FormData();
     formData.append('file', file);
     formData.append('applicantDetails1', id_applicant);

             
                const response = await fetch('http://localhost:8080/api/applicantvoterid', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('File uploaded successfully');
                    console.log("File uploaded successfully");
                } else {
                    alert('Failed to upload file: ' + response.statusText);
                    console.log("Failed to upload file");
                }
            } catch (error) {
                alert('An error occurred: ' + error.message);
            }
        }


        async function uploadadhar() {
            const photoInput = document.getElementById('aadhar1');
            const file = photoInput.files[0];

            if (!file) {
                alert('Please select a file to upload.');
                return;
            }
            try {


             const latestResponse = await fetch('http://localhost:8080/api/latest');
        if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
        }

     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;

     // Create form data and append file and id_applicant
     const formData = new FormData();
     formData.append('file', file);
     formData.append('applicantDetails1', id_applicant);
                const response = await fetch('http://localhost:8080/api/applicantadharcard', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('File uploaded successfully');
                    console.log("File uploaded successfully");
                } else {
                    alert('Failed to upload file: ' + response.statusText);
                    console.log("Failed to upload file");
                }
            } catch (error) {
                alert('An error occurred: ' + error.message);
            }
        }

        async function uploaddriving() {
            const photoInput = document.getElementById('drivinglicense1');
            const file = photoInput.files[0];

            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

            try {

             const latestResponse = await fetch('http://localhost:8080/api/latest');
        if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
        }

     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;

     // Create form data and append file and id_applicant
     const formData = new FormData();
     formData.append('file', file);
     formData.append('applicantDetails1', id_applicant);
                const response = await fetch('http://localhost:8080/api/applicantDl', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('File uploaded successfully');
                    console.log("File uploaded successfully");
                } else {
                    alert('Failed to upload file: ' + response.statusText);
                    console.log("Failed to upload file");
                }
            } catch (error) {
                alert('An error occurred: ' + error.message);
            }
        }

        async function uploadsignature() {
            const photoInput = document.getElementById('signature1');
            const file = photoInput.files[0];

            if (!file) {
                alert('Please select a file to upload.');
                return;
            }

            try {

             const latestResponse = await fetch('http://localhost:8080/api/latest');
        if (!latestResponse.ok) {
         throw new Error('Failed to fetch latest applicant data: ' + latestResponse.statusText);
        }

     const latestData = await latestResponse.json();
     const id_applicant = latestData.id_applicant;

     // Create form data and append file and id_applicant
     const formData = new FormData();
     formData.append('file', file);
     formData.append('applicantDetails1', id_applicant);
                const response = await fetch('http://localhost:8080/api/applicantSign', {
                    method: 'POST',
                    body: formData
                });

                if (response.ok) {
                    alert('File uploaded successfully');
                    console.log("File uploaded successfully");
                } else {
                    alert('Failed to upload file: ' + response.statusText);
                    console.log("Failed to upload file");
                }
            } catch (error) {
                alert('An error occurred: ' + error.message);
            }
        }

        const booleanValue = "false"; // Corrected variable name for clarity

 function handleNext() {
// Specify the URL of the next page
const nextPageUrl = "./CoApplicantform.html"; // Replace with the actual URL of the next page

// Check the condition and navigate or show alert
// if (booleanValue === "true") {
//     window.location.href = nextPageUrl;
// } else {
//     alert('Please check and fill all of the above documents and entities.');
// }
window.location.href = nextPageUrl;

}
 </script>
</body>
</html>